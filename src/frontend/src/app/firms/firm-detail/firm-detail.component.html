<div class="page-header">
  <a routerLink="/firms" class="back-link">← Firmalar</a>
  @if (firm) {
    <h1 class="page-title">{{ firm.name }}</h1>
    <p class="page-subtitle">Oluşturulma: {{ firm.createdAt | date:'dd.MM.yyyy' }}</p>
    <div class="actions">
      <a [routerLink]="['/company']" [queryParams]="{ firmId: firm.id }" class="btn btn-primary">Firma bilgilerini düzenle</a>
    </div>
  } @else {
    <p>Yükleniyor...</p>
  }
</div>

@if (firm && company) {
  <section class="company-info card">
    <h2 class="card-title">Firma bilgileri</h2>
    <dl class="info-list">
      <dt>Firma adı</dt>
      <dd>{{ company.companyName }}</dd>
      <dt>Vergi dairesi</dt>
      <dd>{{ company.taxOffice }}</dd>
      <dt>Vergi numarası</dt>
      <dd>{{ company.taxNumber }}</dd>
      <dt>Adres</dt>
      <dd>{{ company.address }}</dd>
      <dt>Telefon</dt>
      <dd>{{ company.phone }}</dd>
      <dt>E-posta</dt>
      <dd><a [href]="'mailto:' + company.email">{{ company.email }}</a></dd>
      <dt>IBAN</dt>
      <dd>{{ company.iban }}</dd>
    </dl>
  </section>
} @else if (firm) {
  <section class="company-info card">
    <p class="text-muted">Firma bilgileri henüz girilmedi. Düzenlemek için yukarıdaki butonu kullanın.</p>
  </section>
}

@if (firm && firmUsers.length > 0) {
  <section class="firm-users card">
    <h2 class="card-title">Çalışan hesapları</h2>
    <p class="section-desc">Firma admin ve çalışan hesapları.</p>
    <table class="users-table">
      <thead>
        <tr>
          <th>Rol</th>
          <th>E-posta</th>
          <th>Ad Soyad</th>
          <th>Oluşturulma</th>
        </tr>
      </thead>
      <tbody>
        @for (u of firmUsers; track u.id) {
          <tr>
            <td>{{ roleLabel(u.role) }}</td>
            <td><a [href]="'mailto:' + u.email">{{ u.email }}</a></td>
            <td>{{ u.fullName }}</td>
            <td>{{ u.createdAt | date:'dd.MM.yyyy' }}</td>
          </tr>
        }
      </tbody>
    </table>
  </section>
} @else if (firm) {
  <section class="firm-users card">
    <h2 class="card-title">Çalışan hesapları</h2>
    <p class="text-muted">Bu firmaya ait kullanıcı hesabı bulunmuyor.</p>
  </section>
}
