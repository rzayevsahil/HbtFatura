<div class="page-header">
  <h1 class="page-title">Cariler</h1>
</div>
<div class="toolbar">
  <input [(ngModel)]="search" placeholder="Cari adı veya vergi no ile ara..." (keyup.enter)="load()" />
  <button type="button" (click)="load()">Ara</button>
  <a routerLink="/customers/new" class="btn btn-primary">Yeni Cari</a>
</div>
<div class="card table-wrap">
  <table>
    <thead>
      <tr>
        <th>Cari kodu</th>
        <th>Cari adı</th>
        <th>Cari tipi</th>
        <th>Borç toplamı</th>
        <th>Alacak toplamı</th>
        <th>Bakiye</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @for (c of items; track c.id) {
        <tr>
          <td>{{ c.code || '—' }}</td>
          <td><a [routerLink]="['/customers', c.id]">{{ c.title }}</a></td>
          <td>{{ cardTypeLabel(c.cardType) }}</td>
          <td class="amount">{{ c.totalDebit | number:'1.2-2' }} ₺</td>
          <td class="amount">{{ c.totalCredit | number:'1.2-2' }} ₺</td>
          <td class="amount">{{ c.balance | number:'1.2-2' }} ₺</td>
          <td>
            <div class="actions-cell">
              <a [routerLink]="['/customers', c.id]">Detay</a>
              <a [routerLink]="['/customers', c.id, 'edit']">Düzenle</a>
              <button type="button" (click)="delete(c.id)">Sil</button>
            </div>
          </td>
        </tr>
      }
    </tbody>
  </table>
</div>
<div class="pagination">
  <span>Toplam: {{ totalCount }} kayıt</span>
  <button type="button" [disabled]="page <= 1" (click)="prevPage()">Önceki</button>
  <button type="button" [disabled]="items.length < pageSize" (click)="nextPage()">Sonraki</button>
</div>
